                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.3.2 #14228 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module SpriteManager
                                      6 	.optsdcc -msm83
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _SetBank
                                     12 	.globl _memset
                                     13 	.globl _PopBank
                                     14 	.globl _PushBank
                                     15 	.globl _RefreshScroll
                                     16 	.globl _DrawSprite
                                     17 	.globl _InitSprite
                                     18 	.globl _ClearOAMs
                                     19 	.globl _SwapOAMs
                                     20 	.globl _VectorRemovePos
                                     21 	.globl _VectorAdd
                                     22 	.globl _set_sprite_data
                                     23 	.globl _THIS
                                     24 	.globl _THIS_IDX
                                     25 	.globl _last_sprite_pal_loaded
                                     26 	.globl _last_sprite_loaded
                                     27 	.globl _sprite_manager_updatables
                                     28 	.globl _sprite_manager_sprites_pool
                                     29 	.globl _cachedSprite
                                     30 	.globl _sprite_manager_removal_check
                                     31 	.globl _sprite_manager_sprites_poolSTACK
                                     32 	.globl _sprite_manager_sprites
                                     33 	.globl _sprite_manager_sprites_mem
                                     34 	.globl _SpriteManagerReset
                                     35 	.globl _SpriteManagerLoad
                                     36 	.globl _SpriteManagerAdd
                                     37 	.globl _SpriteManagerRemove
                                     38 	.globl _SpriteManagerRemoveSprite
                                     39 	.globl _SpriteManagerFlushRemove
                                     40 	.globl _SpriteManagerUpdate
                                     41 ;--------------------------------------------------------
                                     42 ; special function registers
                                     43 ;--------------------------------------------------------
                                     44 ;--------------------------------------------------------
                                     45 ; ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area _DATA
                           000000    48 G$sprite_manager_sprites_mem$0_0$0==.
      000000                         49 _sprite_manager_sprites_mem::
      000000                         50 	.ds 700
                           0002BC    51 G$sprite_manager_sprites$0_0$0==.
      0002BC                         52 _sprite_manager_sprites::
      0002BC                         53 	.ds 40
                           0002E4    54 G$sprite_manager_sprites_poolSTACK$0_0$0==.
      0002E4                         55 _sprite_manager_sprites_poolSTACK::
      0002E4                         56 	.ds 20
                           0002F8    57 G$sprite_manager_removal_check$0_0$0==.
      0002F8                         58 _sprite_manager_removal_check::
      0002F8                         59 	.ds 1
                           0002F9    60 G$cachedSprite$0_0$0==.
      0002F9                         61 _cachedSprite::
      0002F9                         62 	.ds 2
                                     63 ;--------------------------------------------------------
                                     64 ; ram data
                                     65 ;--------------------------------------------------------
                                     66 	.area _INITIALIZED
                           000000    67 G$sprite_manager_sprites_pool$0_0$0==.
      000000                         68 _sprite_manager_sprites_pool::
      000000                         69 	.ds 2
                           000002    70 G$sprite_manager_updatables$0_0$0==.
      000002                         71 _sprite_manager_updatables::
      000002                         72 	.ds 21
                           000017    73 G$last_sprite_loaded$0_0$0==.
      000017                         74 _last_sprite_loaded::
      000017                         75 	.ds 2
                           000019    76 G$last_sprite_pal_loaded$0_0$0==.
      000019                         77 _last_sprite_pal_loaded::
      000019                         78 	.ds 1
                           00001A    79 G$THIS_IDX$0_0$0==.
      00001A                         80 _THIS_IDX::
      00001A                         81 	.ds 1
                           00001B    82 G$THIS$0_0$0==.
      00001B                         83 _THIS::
      00001B                         84 	.ds 2
                                     85 ;--------------------------------------------------------
                                     86 ; absolute external ram data
                                     87 ;--------------------------------------------------------
                                     88 	.area _DABS (ABS)
                                     89 ;--------------------------------------------------------
                                     90 ; global & static initialisations
                                     91 ;--------------------------------------------------------
                                     92 	.area _HOME
                                     93 	.area _GSINIT
                                     94 	.area _GSFINAL
                                     95 	.area _GSINIT
                                     96 ;--------------------------------------------------------
                                     97 ; Home
                                     98 ;--------------------------------------------------------
                                     99 	.area _HOME
                                    100 	.area _HOME
                                    101 ;--------------------------------------------------------
                                    102 ; code
                                    103 ;--------------------------------------------------------
                                    104 	.area _CODE
                           000000   105 	G$SpriteManagerReset$0$0	= .
                                    106 	.globl	G$SpriteManagerReset$0$0
                           000000   107 	C$SpriteManager.c$22$0_0$190	= .
                                    108 	.globl	C$SpriteManager.c$22$0_0$190
                                    109 ;C:/ZGB-2023.0/common/src/SpriteManager.c:22: void SpriteManagerReset() {
                                    110 ;	---------------------------------
                                    111 ; Function SpriteManagerReset
                                    112 ; ---------------------------------
      000000                        113 _SpriteManagerReset::
      000000 E8 FD            [16]  114 	add	sp, #-3
                           000002   115 	C$SpriteManager.c$25$1_0$190	= .
                                    116 	.globl	C$SpriteManager.c$25$1_0$190
                                    117 ;C:/ZGB-2023.0/common/src/SpriteManager.c:25: last_sprite_loaded = 128;
      000002 21r17r00         [12]  118 	ld	hl, #_last_sprite_loaded
      000005 3E 80            [ 8]  119 	ld	a, #0x80
      000007 22               [ 8]  120 	ld	(hl+), a
      000008 AF               [ 4]  121 	xor	a, a
      000009 77               [ 8]  122 	ld	(hl), a
                           00000A   123 	C$SpriteManager.c$26$1_0$190	= .
                                    124 	.globl	C$SpriteManager.c$26$1_0$190
                                    125 ;C:/ZGB-2023.0/common/src/SpriteManager.c:26: last_sprite_pal_loaded = 0;
      00000A 21r19r00         [12]  126 	ld	hl, #_last_sprite_pal_loaded
                           00000D   127 	C$SpriteManager.c$29$3_0$192	= .
                                    128 	.globl	C$SpriteManager.c$29$3_0$192
                                    129 ;C:/ZGB-2023.0/common/src/SpriteManager.c:29: for(i = 0u; i != sprite_manager_updatables[0]; ++ i) {
      00000D 36 00            [12]  130 	ld	(hl), #0x00
      00000F 4E               [ 8]  131 	ld	c, (hl)
      000010                        132 00104$:
      000010 21r02r00         [12]  133 	ld	hl, #_sprite_manager_updatables
      000013 46               [ 8]  134 	ld	b, (hl)
      000014 79               [ 4]  135 	ld	a, c
      000015 90               [ 4]  136 	sub	a, b
      000016 28 57            [12]  137 	jr	Z, 00101$
                           000018   138 	C$SpriteManager.c$30$3_0$192	= .
                                    139 	.globl	C$SpriteManager.c$30$3_0$192
                                    140 ;C:/ZGB-2023.0/common/src/SpriteManager.c:30: THIS = sprite_manager_sprites[sprite_manager_updatables[i + 1]];
      000018 79               [ 4]  141 	ld	a, c
      000019 3C               [ 4]  142 	inc	a
      00001A 5F               [ 4]  143 	ld	e, a
      00001B 07               [ 4]  144 	rlca
      00001C 9F               [ 4]  145 	sbc	a, a
      00001D 57               [ 4]  146 	ld	d, a
      00001E 21r02r00         [12]  147 	ld	hl, #_sprite_manager_updatables
      000021 19               [ 8]  148 	add	hl, de
      000022 6E               [ 8]  149 	ld	l, (hl)
                                    150 ;	spillPairReg hl
      000023 26 00            [ 8]  151 	ld	h, #0x00
                                    152 ;	spillPairReg hl
                                    153 ;	spillPairReg hl
      000025 29               [ 8]  154 	add	hl, hl
      000026 11rBCr02         [12]  155 	ld	de, #_sprite_manager_sprites
      000029 19               [ 8]  156 	add	hl, de
      00002A 5D               [ 4]  157 	ld	e, l
      00002B 54               [ 4]  158 	ld	d, h
      00002C 1A               [ 8]  159 	ld	a, (de)
      00002D 21r1Br00         [12]  160 	ld	hl, #_THIS
      000030 22               [ 8]  161 	ld	(hl+), a
      000031 13               [ 8]  162 	inc	de
      000032 1A               [ 8]  163 	ld	a, (de)
      000033 77               [ 8]  164 	ld	(hl), a
                           000034   165 	C$SpriteManager.c$31$3_0$192	= .
                                    166 	.globl	C$SpriteManager.c$31$3_0$192
                                    167 ;C:/ZGB-2023.0/common/src/SpriteManager.c:31: PUSH_BANK(spriteBanks[THIS->type]);
      000034 21r1Br00         [12]  168 	ld	hl, #_THIS
      000037 2A               [ 8]  169 	ld	a, (hl+)
      000038 5F               [ 4]  170 	ld	e, a
      000039 56               [ 8]  171 	ld	d, (hl)
      00003A 21 13 00         [12]  172 	ld	hl, #0x0013
      00003D 19               [ 8]  173 	add	hl, de
      00003E 5E               [ 8]  174 	ld	e, (hl)
      00003F 21r00r00         [12]  175 	ld	hl, #_spriteBanks
      000042 16 00            [ 8]  176 	ld	d, #0x00
      000044 19               [ 8]  177 	add	hl, de
      000045 7E               [ 8]  178 	ld	a, (hl)
      000046 C5               [16]  179 	push	bc
      000047 F5               [16]  180 	push	af
      000048 33               [ 8]  181 	inc	sp
      000049 CDr00r00         [24]  182 	call	_PushBank
      00004C 33               [ 8]  183 	inc	sp
      00004D C1               [12]  184 	pop	bc
                           00004E   185 	C$SpriteManager.c$32$3_0$192	= .
                                    186 	.globl	C$SpriteManager.c$32$3_0$192
                                    187 ;C:/ZGB-2023.0/common/src/SpriteManager.c:32: spriteDestroyFuncs[THIS->type]();
      00004E 21r1Br00         [12]  188 	ld	hl, #_THIS
      000051 2A               [ 8]  189 	ld	a, (hl+)
      000052 5F               [ 4]  190 	ld	e, a
      000053 56               [ 8]  191 	ld	d, (hl)
      000054 21 13 00         [12]  192 	ld	hl, #0x0013
      000057 19               [ 8]  193 	add	hl, de
      000058 6E               [ 8]  194 	ld	l, (hl)
                                    195 ;	spillPairReg hl
      000059 26 00            [ 8]  196 	ld	h, #0x00
                                    197 ;	spillPairReg hl
                                    198 ;	spillPairReg hl
      00005B 29               [ 8]  199 	add	hl, hl
      00005C 11r00r00         [12]  200 	ld	de, #_spriteDestroyFuncs
      00005F 19               [ 8]  201 	add	hl, de
      000060 2A               [ 8]  202 	ld	a, (hl+)
      000061 47               [ 4]  203 	ld	b, a
      000062 66               [ 8]  204 	ld	h, (hl)
                                    205 ;	spillPairReg hl
      000063 C5               [16]  206 	push	bc
      000064 68               [ 4]  207 	ld	l, b
                                    208 ;	spillPairReg hl
                                    209 ;	spillPairReg hl
      000065 CDr00r00         [24]  210 	call	___sdcc_call_hl
      000068 CDr00r00         [24]  211 	call	_PopBank
      00006B C1               [12]  212 	pop	bc
                           00006C   213 	C$SpriteManager.c$29$2_0$191	= .
                                    214 	.globl	C$SpriteManager.c$29$2_0$191
                                    215 ;C:/ZGB-2023.0/common/src/SpriteManager.c:29: for(i = 0u; i != sprite_manager_updatables[0]; ++ i) {
      00006C 0C               [ 4]  216 	inc	c
      00006D 18 A1            [12]  217 	jr	00104$
      00006F                        218 00101$:
                           00006F   219 	C$SpriteManager.c$37$1_0$190	= .
                                    220 	.globl	C$SpriteManager.c$37$1_0$190
                                    221 ;C:/ZGB-2023.0/common/src/SpriteManager.c:37: StackClear(sprite_manager_sprites_pool);
      00006F 21r00r00         [12]  222 	ld	hl, #_sprite_manager_sprites_pool
      000072 36rE3            [12]  223 	ld	(hl), #<((_sprite_manager_sprites_poolSTACK - 1))
      000074 23               [ 8]  224 	inc	hl
      000075 36s02            [12]  225 	ld	(hl), #>((_sprite_manager_sprites_poolSTACK - 1))
                           000077   226 	C$SpriteManager.c$38$3_0$194	= .
                                    227 	.globl	C$SpriteManager.c$38$3_0$194
                                    228 ;C:/ZGB-2023.0/common/src/SpriteManager.c:38: for(i = 0; i != N_SPRITE_MANAGER_SPRITES; ++i) {
      000077 F8 02            [12]  229 	ldhl	sp,	#2
      000079 36 00            [12]  230 	ld	(hl), #0x00
      00007B                        231 00106$:
                           00007B   232 	C$SpriteManager.c$39$3_0$194	= .
                                    233 	.globl	C$SpriteManager.c$39$3_0$194
                                    234 ;C:/ZGB-2023.0/common/src/SpriteManager.c:39: sprite_manager_sprites[i] = (Sprite*)&sprite_manager_sprites_mem[sizeof(Sprite) * (UINT16)i];
      00007B F8 02            [12]  235 	ldhl	sp,	#2
      00007D 7E               [ 8]  236 	ld	a, (hl)
      00007E 16 00            [ 8]  237 	ld	d, #0x00
      000080 87               [ 4]  238 	add	a, a
      000081 CB 12            [ 8]  239 	rl	d
      000083 5F               [ 4]  240 	ld	e, a
      000084 21rBCr02         [12]  241 	ld	hl, #_sprite_manager_sprites
      000087 19               [ 8]  242 	add	hl, de
      000088 33               [ 8]  243 	inc	sp
      000089 33               [ 8]  244 	inc	sp
      00008A E5               [16]  245 	push	hl
      00008B F8 02            [12]  246 	ldhl	sp,	#2
      00008D 4E               [ 8]  247 	ld	c, (hl)
      00008E 06 00            [ 8]  248 	ld	b, #0x00
      000090 69               [ 4]  249 	ld	l, c
      000091 60               [ 4]  250 	ld	h, b
      000092 29               [ 8]  251 	add	hl, hl
      000093 29               [ 8]  252 	add	hl, hl
      000094 29               [ 8]  253 	add	hl, hl
      000095 29               [ 8]  254 	add	hl, hl
      000096 09               [ 8]  255 	add	hl, bc
      000097 29               [ 8]  256 	add	hl, hl
      000098 09               [ 8]  257 	add	hl, bc
      000099 11r00r00         [12]  258 	ld	de, #_sprite_manager_sprites_mem
      00009C 19               [ 8]  259 	add	hl, de
      00009D 4D               [ 4]  260 	ld	c, l
      00009E 44               [ 4]  261 	ld	b, h
      00009F E1               [12]  262 	pop	hl
      0000A0 E5               [16]  263 	push	hl
      0000A1 79               [ 4]  264 	ld	a, c
      0000A2 22               [ 8]  265 	ld	(hl+), a
      0000A3 70               [ 8]  266 	ld	(hl), b
                           0000A4   267 	C$SpriteManager.c$40$3_0$194	= .
                                    268 	.globl	C$SpriteManager.c$40$3_0$194
                                    269 ;C:/ZGB-2023.0/common/src/SpriteManager.c:40: StackPush(sprite_manager_sprites_pool, i);		
      0000A4 21r00r00         [12]  270 	ld	hl, #_sprite_manager_sprites_pool
      0000A7 34               [12]  271 	inc	(hl)
      0000A8 20 02            [12]  272 	jr	NZ, 00142$
      0000AA 23               [ 8]  273 	inc	hl
      0000AB 34               [12]  274 	inc	(hl)
      0000AC                        275 00142$:
      0000AC 21r00r00         [12]  276 	ld	hl, #_sprite_manager_sprites_pool
      0000AF 2A               [ 8]  277 	ld	a, (hl+)
      0000B0 4F               [ 4]  278 	ld	c, a
      0000B1 46               [ 8]  279 	ld	b, (hl)
      0000B2 F8 02            [12]  280 	ldhl	sp,	#2
      0000B4 7E               [ 8]  281 	ld	a, (hl)
      0000B5 02               [ 8]  282 	ld	(bc), a
                           0000B6   283 	C$SpriteManager.c$38$2_0$193	= .
                                    284 	.globl	C$SpriteManager.c$38$2_0$193
                                    285 ;C:/ZGB-2023.0/common/src/SpriteManager.c:38: for(i = 0; i != N_SPRITE_MANAGER_SPRITES; ++i) {
      0000B6 34               [12]  286 	inc	(hl)
      0000B7 7E               [ 8]  287 	ld	a, (hl)
      0000B8 D6 14            [ 8]  288 	sub	a, #0x14
      0000BA 20 BF            [12]  289 	jr	NZ, 00106$
                           0000BC   290 	C$SpriteManager.c$42$1_0$190	= .
                                    291 	.globl	C$SpriteManager.c$42$1_0$190
                                    292 ;C:/ZGB-2023.0/common/src/SpriteManager.c:42: ClearOAMs();
      0000BC CDr00r00         [24]  293 	call	_ClearOAMs
                           0000BF   294 	C$SpriteManager.c$44$1_0$190	= .
                                    295 	.globl	C$SpriteManager.c$44$1_0$190
                                    296 ;C:/ZGB-2023.0/common/src/SpriteManager.c:44: memset(spriteIdxs, 128, N_SPRITE_TYPES);
      0000BF 11 09 00         [12]  297 	ld	de, #0x0009
      0000C2 D5               [16]  298 	push	de
      0000C3 AF               [ 4]  299 	xor	a, a
      0000C4 F5               [16]  300 	push	af
      0000C5 11r00r00         [12]  301 	ld	de, #_spriteIdxs
      0000C8 D5               [16]  302 	push	de
      0000C9 CDr00r00         [24]  303 	call	_memset
      0000CC E8 06            [16]  304 	add	sp, #6
                           0000CE   305 	C$SpriteManager.c$47$1_0$190	= .
                                    306 	.globl	C$SpriteManager.c$47$1_0$190
                                    307 ;C:/ZGB-2023.0/common/src/SpriteManager.c:47: sprite_manager_updatables[0] = 0;
      0000CE 21r02r00         [12]  308 	ld	hl, #_sprite_manager_updatables
      0000D1 36 00            [12]  309 	ld	(hl), #0x00
                           0000D3   310 	C$SpriteManager.c$48$1_0$190	= .
                                    311 	.globl	C$SpriteManager.c$48$1_0$190
                                    312 ;C:/ZGB-2023.0/common/src/SpriteManager.c:48: sprite_manager_removal_check = 0;
      0000D3 21rF8r02         [12]  313 	ld	hl, #_sprite_manager_removal_check
      0000D6 36 00            [12]  314 	ld	(hl), #0x00
                           0000D8   315 	C$SpriteManager.c$49$1_0$190	= .
                                    316 	.globl	C$SpriteManager.c$49$1_0$190
                                    317 ;C:/ZGB-2023.0/common/src/SpriteManager.c:49: }
      0000D8 E8 03            [16]  318 	add	sp, #3
                           0000DA   319 	C$SpriteManager.c$49$1_0$190	= .
                                    320 	.globl	C$SpriteManager.c$49$1_0$190
                           0000DA   321 	XG$SpriteManagerReset$0$0	= .
                                    322 	.globl	XG$SpriteManagerReset$0$0
      0000DA C9               [16]  323 	ret
                           0000DB   324 	G$SpriteManagerLoad$0$0	= .
                                    325 	.globl	G$SpriteManagerLoad$0$0
                           0000DB   326 	C$SpriteManager.c$52$1_0$196	= .
                                    327 	.globl	C$SpriteManager.c$52$1_0$196
                                    328 ;C:/ZGB-2023.0/common/src/SpriteManager.c:52: void SpriteManagerLoad(UINT8 sprite_type) {
                                    329 ;	---------------------------------
                                    330 ; Function SpriteManagerLoad
                                    331 ; ---------------------------------
      0000DB                        332 _SpriteManagerLoad::
      0000DB E8 F4            [16]  333 	add	sp, #-12
      0000DD F8 0B            [12]  334 	ldhl	sp,	#11
      0000DF 77               [ 8]  335 	ld	(hl), a
                           0000E0   336 	C$SpriteManager.c$56$1_0$196	= .
                                    337 	.globl	C$SpriteManager.c$56$1_0$196
                                    338 ;C:/ZGB-2023.0/common/src/SpriteManager.c:56: if(spriteIdxs[sprite_type] != 128 || last_sprite_loaded < -127) //Already loaded or no room for this sprite
      0000E0 01r00r00         [12]  339 	ld	bc, #_spriteIdxs+0
      0000E3 6E               [ 8]  340 	ld	l, (hl)
      0000E4 26 00            [ 8]  341 	ld	h, #0x00
      0000E6 09               [ 8]  342 	add	hl, bc
      0000E7 4D               [ 4]  343 	ld	c, l
      0000E8 44               [ 4]  344 	ld	b, h
      0000E9 0A               [ 8]  345 	ld	a, (bc)
      0000EA D6 80            [ 8]  346 	sub	a, #0x80
      0000EC C2r06r02         [16]  347 	jp	NZ,00107$
      0000EF 21r17r00         [12]  348 	ld	hl, #_last_sprite_loaded
      0000F2 2A               [ 8]  349 	ld	a, (hl+)
      0000F3 D6 81            [ 8]  350 	sub	a, #0x81
      0000F5 7E               [ 8]  351 	ld	a, (hl)
      0000F6 DE FF            [ 8]  352 	sbc	a, #0xff
      0000F8 56               [ 8]  353 	ld	d, (hl)
      0000F9 3E FF            [ 8]  354 	ld	a, #0xff
      0000FB CB 7F            [ 8]  355 	bit	7,a
      0000FD 28 07            [12]  356 	jr	Z, 00125$
      0000FF CB 7A            [ 8]  357 	bit	7, d
      000101 20 08            [12]  358 	jr	NZ, 00126$
      000103 BF               [ 4]  359 	cp	a, a
      000104 18 05            [12]  360 	jr	00126$
      000106                        361 00125$:
      000106 CB 7A            [ 8]  362 	bit	7, d
      000108 28 01            [12]  363 	jr	Z, 00126$
      00010A 37               [ 4]  364 	scf
      00010B                        365 00126$:
                           00010B   366 	C$SpriteManager.c$57$1_0$196	= .
                                    367 	.globl	C$SpriteManager.c$57$1_0$196
                                    368 ;C:/ZGB-2023.0/common/src/SpriteManager.c:57: return;
      00010B DAr06r02         [16]  369 	jp	C,00107$
                           00010E   370 	C$SpriteManager.c$59$1_0$196	= .
                                    371 	.globl	C$SpriteManager.c$59$1_0$196
                                    372 ;C:/ZGB-2023.0/common/src/SpriteManager.c:59: PUSH_BANK(spriteDataBanks[sprite_type])
      00010E 11r00r00         [12]  373 	ld	de, #_spriteDataBanks+0
      000111 F8 0B            [12]  374 	ldhl	sp,	#11
      000113 6E               [ 8]  375 	ld	l, (hl)
      000114 26 00            [ 8]  376 	ld	h, #0x00
      000116 19               [ 8]  377 	add	hl, de
      000117 5D               [ 4]  378 	ld	e, l
      000118 54               [ 4]  379 	ld	d, h
      000119 1A               [ 8]  380 	ld	a, (de)
      00011A C5               [16]  381 	push	bc
      00011B F5               [16]  382 	push	af
      00011C 33               [ 8]  383 	inc	sp
      00011D CDr00r00         [24]  384 	call	_PushBank
      000120 33               [ 8]  385 	inc	sp
      000121 C1               [12]  386 	pop	bc
                           000122   387 	C$SpriteManager.c$61$1_1$197	= .
                                    388 	.globl	C$SpriteManager.c$61$1_1$197
                                    389 ;C:/ZGB-2023.0/common/src/SpriteManager.c:61: const struct MetaSpriteInfo* data = spriteDatas[sprite_type];
      000122 F8 0B            [12]  390 	ldhl	sp,	#11
      000124 6E               [ 8]  391 	ld	l, (hl)
      000125 26 00            [ 8]  392 	ld	h, #0x00
      000127 29               [ 8]  393 	add	hl, hl
      000128 11r00r00         [12]  394 	ld	de, #_spriteDatas
      00012B 19               [ 8]  395 	add	hl, de
      00012C 5D               [ 4]  396 	ld	e, l
      00012D 54               [ 4]  397 	ld	d, h
      00012E 1A               [ 8]  398 	ld	a, (de)
      00012F F8 09            [12]  399 	ldhl	sp,	#9
      000131 22               [ 8]  400 	ld	(hl+), a
      000132 13               [ 8]  401 	inc	de
      000133 1A               [ 8]  402 	ld	a, (de)
      000134 77               [ 8]  403 	ld	(hl), a
                           000135   404 	C$SpriteManager.c$62$1_1$197	= .
                                    405 	.globl	C$SpriteManager.c$62$1_1$197
                                    406 ;C:/ZGB-2023.0/common/src/SpriteManager.c:62: UINT8 n_tiles = data->num_tiles;
      000135 F8 09            [12]  407 	ldhl	sp,	#9
      000137 2A               [ 8]  408 	ld	a, (hl+)
      000138 5F               [ 4]  409 	ld	e, a
      000139 56               [ 8]  410 	ld	d, (hl)
      00013A 13               [ 8]  411 	inc	de
      00013B 13               [ 8]  412 	inc	de
      00013C 1A               [ 8]  413 	ld	a, (de)
      00013D F8 00            [12]  414 	ldhl	sp,	#0
      00013F 77               [ 8]  415 	ld	(hl), a
                           000140   416 	C$SpriteManager.c$65$1_1$197	= .
                                    417 	.globl	C$SpriteManager.c$65$1_1$197
                                    418 ;C:/ZGB-2023.0/common/src/SpriteManager.c:65: last_sprite_loaded -= n_tiles;
      000140 2A               [ 8]  419 	ld	a, (hl+)
      000141 22               [ 8]  420 	ld	(hl+), a
      000142 36 00            [12]  421 	ld	(hl), #0x00
      000144 21r17r00         [12]  422 	ld	hl, #_last_sprite_loaded
      000147 2A               [ 8]  423 	ld	a, (hl+)
      000148 5F               [ 4]  424 	ld	e, a
      000149 56               [ 8]  425 	ld	d, (hl)
      00014A F8 01            [12]  426 	ldhl	sp,	#1
      00014C 2A               [ 8]  427 	ld	a,	(hl+)
      00014D 66               [ 8]  428 	ld	h, (hl)
      00014E 6F               [ 4]  429 	ld	l, a
      00014F 7B               [ 4]  430 	ld	a, e
      000150 95               [ 4]  431 	sub	a, l
      000151 5F               [ 4]  432 	ld	e, a
      000152 7A               [ 4]  433 	ld	a, d
      000153 9C               [ 4]  434 	sbc	a, h
      000154 21r18r00         [12]  435 	ld	hl, #_last_sprite_loaded + 1
      000157 32               [ 8]  436 	ld	(hl-), a
      000158 73               [ 8]  437 	ld	(hl), e
                           000159   438 	C$SpriteManager.c$66$1_1$197	= .
                                    439 	.globl	C$SpriteManager.c$66$1_1$197
                                    440 ;C:/ZGB-2023.0/common/src/SpriteManager.c:66: spriteIdxs[sprite_type] = last_sprite_loaded;
      000159 7E               [ 8]  441 	ld	a, (hl)
      00015A 02               [ 8]  442 	ld	(bc), a
                           00015B   443 	C$SpriteManager.c$67$1_2$198	= .
                                    444 	.globl	C$SpriteManager.c$67$1_2$198
                                    445 ;C:/ZGB-2023.0/common/src/SpriteManager.c:67: UINT8 end = last_sprite_loaded + n_tiles;
      00015B 7E               [ 8]  446 	ld	a, (hl)
      00015C F8 00            [12]  447 	ldhl	sp,	#0
      00015E 4E               [ 8]  448 	ld	c, (hl)
      00015F 81               [ 4]  449 	add	a, c
      000160 F8 03            [12]  450 	ldhl	sp,	#3
      000162 77               [ 8]  451 	ld	(hl), a
                           000163   452 	C$SpriteManager.c$68$1_2$198	= .
                                    453 	.globl	C$SpriteManager.c$68$1_2$198
                                    454 ;C:/ZGB-2023.0/common/src/SpriteManager.c:68: if((end - 1u) >= (UINT8)last_sprite_loaded) {
      000163 2A               [ 8]  455 	ld	a, (hl+)
      000164 23               [ 8]  456 	inc	hl
      000165 4F               [ 4]  457 	ld	c, a
      000166 06 00            [ 8]  458 	ld	b, #0x00
      000168 11 01 00         [12]  459 	ld	de, #0x0001
      00016B 79               [ 4]  460 	ld	a, c
      00016C 93               [ 4]  461 	sub	a, e
      00016D 5F               [ 4]  462 	ld	e, a
      00016E 78               [ 4]  463 	ld	a, b
      00016F 9A               [ 4]  464 	sbc	a, d
      000170 32               [ 8]  465 	ld	(hl-), a
      000171 73               [ 8]  466 	ld	(hl), e
      000172 FAr17r00         [16]  467 	ld	a, (#_last_sprite_loaded)
      000175 F8 06            [12]  468 	ldhl	sp,	#6
      000177 77               [ 8]  469 	ld	(hl), a
      000178 2A               [ 8]  470 	ld	a, (hl+)
      000179 22               [ 8]  471 	ld	(hl+), a
                           00017A   472 	C$SpriteManager.c$69$1_2$196	= .
                                    473 	.globl	C$SpriteManager.c$69$1_2$196
                                    474 ;C:/ZGB-2023.0/common/src/SpriteManager.c:69: set_sprite_data(last_sprite_loaded, n_tiles, data->data);
      00017A AF               [ 4]  475 	xor	a, a
      00017B 22               [ 8]  476 	ld	(hl+), a
      00017C 2A               [ 8]  477 	ld	a, (hl+)
      00017D 4F               [ 4]  478 	ld	c, a
                           00017E   479 	C$SpriteManager.c$71$1_2$196	= .
                                    480 	.globl	C$SpriteManager.c$71$1_2$196
                                    481 ;C:/ZGB-2023.0/common/src/SpriteManager.c:71: set_sprite_data(last_sprite_loaded, n_tiles - end, data->data);
      00017E 3A               [ 8]  482 	ld	a, (hl-)
      00017F 47               [ 4]  483 	ld	b, a
      000180 03               [ 8]  484 	inc	bc
      000181 03               [ 8]  485 	inc	bc
      000182 03               [ 8]  486 	inc	bc
      000183 59               [ 4]  487 	ld	e, c
      000184 50               [ 4]  488 	ld	d, b
      000185 1A               [ 8]  489 	ld	a, (de)
      000186 22               [ 8]  490 	ld	(hl+), a
      000187 13               [ 8]  491 	inc	de
      000188 1A               [ 8]  492 	ld	a, (de)
      000189 77               [ 8]  493 	ld	(hl), a
                           00018A   494 	C$SpriteManager.c$68$1_2$198	= .
                                    495 	.globl	C$SpriteManager.c$68$1_2$198
                                    496 ;C:/ZGB-2023.0/common/src/SpriteManager.c:68: if((end - 1u) >= (UINT8)last_sprite_loaded) {
      00018A F8 04            [12]  497 	ldhl	sp,	#4
      00018C 5D               [ 4]  498 	ld	e, l
      00018D 54               [ 4]  499 	ld	d, h
      00018E F8 07            [12]  500 	ldhl	sp,	#7
      000190 1A               [ 8]  501 	ld	a, (de)
      000191 13               [ 8]  502 	inc	de
      000192 96               [ 8]  503 	sub	a, (hl)
      000193 23               [ 8]  504 	inc	hl
      000194 1A               [ 8]  505 	ld	a, (de)
      000195 9E               [ 8]  506 	sbc	a, (hl)
      000196 38 17            [12]  507 	jr	C, 00105$
                           000198   508 	C$SpriteManager.c$69$2_2$199	= .
                                    509 	.globl	C$SpriteManager.c$69$2_2$199
                                    510 ;C:/ZGB-2023.0/common/src/SpriteManager.c:69: set_sprite_data(last_sprite_loaded, n_tiles, data->data);
      000198 F8 09            [12]  511 	ldhl	sp,	#9
      00019A 2A               [ 8]  512 	ld	a, (hl+)
      00019B 5F               [ 4]  513 	ld	e, a
      00019C 56               [ 8]  514 	ld	d, (hl)
      00019D D5               [16]  515 	push	de
      00019E F8 02            [12]  516 	ldhl	sp,	#2
      0001A0 7E               [ 8]  517 	ld	a, (hl)
      0001A1 F5               [16]  518 	push	af
      0001A2 33               [ 8]  519 	inc	sp
      0001A3 F8 09            [12]  520 	ldhl	sp,	#9
      0001A5 7E               [ 8]  521 	ld	a, (hl)
      0001A6 F5               [16]  522 	push	af
      0001A7 33               [ 8]  523 	inc	sp
      0001A8 CDr00r00         [24]  524 	call	_set_sprite_data
      0001AB E8 04            [16]  525 	add	sp, #4
      0001AD 18 54            [12]  526 	jr	00106$
      0001AF                        527 00105$:
                           0001AF   528 	C$SpriteManager.c$71$2_2$200	= .
                                    529 	.globl	C$SpriteManager.c$71$2_2$200
                                    530 ;C:/ZGB-2023.0/common/src/SpriteManager.c:71: set_sprite_data(last_sprite_loaded, n_tiles - end, data->data);
      0001AF F8 00            [12]  531 	ldhl	sp,	#0
      0001B1 7E               [ 8]  532 	ld	a, (hl)
      0001B2 F8 03            [12]  533 	ldhl	sp,	#3
      0001B4 96               [ 8]  534 	sub	a, (hl)
      0001B5 F8 09            [12]  535 	ldhl	sp,	#9
      0001B7 5E               [ 8]  536 	ld	e, (hl)
      0001B8 23               [ 8]  537 	inc	hl
      0001B9 56               [ 8]  538 	ld	d, (hl)
      0001BA D5               [16]  539 	push	de
      0001BB F5               [16]  540 	push	af
      0001BC 33               [ 8]  541 	inc	sp
      0001BD F8 09            [12]  542 	ldhl	sp,	#9
      0001BF 7E               [ 8]  543 	ld	a, (hl)
      0001C0 F5               [16]  544 	push	af
      0001C1 33               [ 8]  545 	inc	sp
      0001C2 CDr00r00         [24]  546 	call	_set_sprite_data
      0001C5 E8 04            [16]  547 	add	sp, #4
                           0001C7   548 	C$SpriteManager.c$72$2_2$200	= .
                                    549 	.globl	C$SpriteManager.c$72$2_2$200
                                    550 ;C:/ZGB-2023.0/common/src/SpriteManager.c:72: set_sprite_data(0, end, data->data + ((n_tiles - end) << 4));
      0001C7 59               [ 4]  551 	ld	e, c
      0001C8 50               [ 4]  552 	ld	d, b
      0001C9 1A               [ 8]  553 	ld	a, (de)
      0001CA F8 09            [12]  554 	ldhl	sp,	#9
      0001CC 22               [ 8]  555 	ld	(hl+), a
      0001CD 13               [ 8]  556 	inc	de
      0001CE 1A               [ 8]  557 	ld	a, (de)
      0001CF 77               [ 8]  558 	ld	(hl), a
      0001D0 F8 03            [12]  559 	ldhl	sp,	#3
      0001D2 3A               [ 8]  560 	ld	a, (hl-)
      0001D3 2B               [ 8]  561 	dec	hl
      0001D4 4F               [ 4]  562 	ld	c, a
      0001D5 06 00            [ 8]  563 	ld	b, #0x00
      0001D7 2A               [ 8]  564 	ld	a, (hl+)
      0001D8 5F               [ 4]  565 	ld	e, a
      0001D9 56               [ 8]  566 	ld	d, (hl)
      0001DA 7B               [ 4]  567 	ld	a, e
      0001DB 91               [ 4]  568 	sub	a, c
      0001DC 5F               [ 4]  569 	ld	e, a
      0001DD 7A               [ 4]  570 	ld	a, d
      0001DE 98               [ 4]  571 	sbc	a, b
      0001DF 47               [ 4]  572 	ld	b, a
      0001E0 4B               [ 4]  573 	ld	c, e
      0001E1 CB 21            [ 8]  574 	sla	c
      0001E3 CB 10            [ 8]  575 	rl	b
      0001E5 CB 21            [ 8]  576 	sla	c
      0001E7 CB 10            [ 8]  577 	rl	b
      0001E9 CB 21            [ 8]  578 	sla	c
      0001EB CB 10            [ 8]  579 	rl	b
      0001ED CB 21            [ 8]  580 	sla	c
      0001EF CB 10            [ 8]  581 	rl	b
      0001F1 F8 09            [12]  582 	ldhl	sp,	#9
      0001F3 2A               [ 8]  583 	ld	a,	(hl+)
      0001F4 66               [ 8]  584 	ld	h, (hl)
      0001F5 6F               [ 4]  585 	ld	l, a
      0001F6 09               [ 8]  586 	add	hl, bc
      0001F7 E5               [16]  587 	push	hl
      0001F8 F8 05            [12]  588 	ldhl	sp,	#5
      0001FA 66               [ 8]  589 	ld	h, (hl)
      0001FB 2E 00            [ 8]  590 	ld	l, #0x00
      0001FD E5               [16]  591 	push	hl
      0001FE CDr00r00         [24]  592 	call	_set_sprite_data
      000201 E8 04            [16]  593 	add	sp, #4
      000203                        594 00106$:
                           000203   595 	C$SpriteManager.c$91$1_2$198	= .
                                    596 	.globl	C$SpriteManager.c$91$1_2$198
                                    597 ;C:/ZGB-2023.0/common/src/SpriteManager.c:91: POP_BANK
      000203 CDr00r00         [24]  598 	call	_PopBank
      000206                        599 00107$:
                           000206   600 	C$SpriteManager.c$92$1_2$196	= .
                                    601 	.globl	C$SpriteManager.c$92$1_2$196
                                    602 ;C:/ZGB-2023.0/common/src/SpriteManager.c:92: }
      000206 E8 0C            [16]  603 	add	sp, #12
                           000208   604 	C$SpriteManager.c$92$1_2$196	= .
                                    605 	.globl	C$SpriteManager.c$92$1_2$196
                           000208   606 	XG$SpriteManagerLoad$0$0	= .
                                    607 	.globl	XG$SpriteManagerLoad$0$0
      000208 C9               [16]  608 	ret
                           000209   609 	G$SpriteManagerAdd$0$0	= .
                                    610 	.globl	G$SpriteManagerAdd$0$0
                           000209   611 	C$SpriteManager.c$95$1_2$202	= .
                                    612 	.globl	C$SpriteManager.c$95$1_2$202
                                    613 ;C:/ZGB-2023.0/common/src/SpriteManager.c:95: Sprite* SpriteManagerAdd(UINT8 sprite_type, UINT16 x, UINT16 y) {
                                    614 ;	---------------------------------
                                    615 ; Function SpriteManagerAdd
                                    616 ; ---------------------------------
      000209                        617 _SpriteManagerAdd::
      000209 E8 F5            [16]  618 	add	sp, #-11
      00020B F8 0A            [12]  619 	ldhl	sp,	#10
      00020D 32               [ 8]  620 	ld	(hl-), a
      00020E 2B               [ 8]  621 	dec	hl
      00020F 7B               [ 4]  622 	ld	a, e
      000210 22               [ 8]  623 	ld	(hl+), a
                           000211   624 	C$SpriteManager.c$100$1_0$202	= .
                                    625 	.globl	C$SpriteManager.c$100$1_0$202
                                    626 ;C:/ZGB-2023.0/common/src/SpriteManager.c:100: SpriteManagerLoad(sprite_type);
      000211 7A               [ 4]  627 	ld	a, d
      000212 22               [ 8]  628 	ld	(hl+), a
      000213 7E               [ 8]  629 	ld	a, (hl)
      000214 CDrDBr00         [24]  630 	call	_SpriteManagerLoad
                           000217   631 	C$SpriteManager.c$102$1_0$202	= .
                                    632 	.globl	C$SpriteManager.c$102$1_0$202
                                    633 ;C:/ZGB-2023.0/common/src/SpriteManager.c:102: sprite_idx = StackPop(sprite_manager_sprites_pool);
      000217 21r00r00         [12]  634 	ld	hl, #_sprite_manager_sprites_pool
      00021A 2A               [ 8]  635 	ld	a, (hl+)
      00021B 4F               [ 4]  636 	ld	c, a
      00021C 46               [ 8]  637 	ld	b, (hl)
      00021D 0A               [ 8]  638 	ld	a, (bc)
      00021E F8 07            [12]  639 	ldhl	sp,	#7
      000220 77               [ 8]  640 	ld	(hl), a
      000221 21r00r00         [12]  641 	ld	hl, #_sprite_manager_sprites_pool
      000224 2A               [ 8]  642 	ld	a, (hl+)
      000225 5F               [ 4]  643 	ld	e, a
      000226 3A               [ 8]  644 	ld	a, (hl-)
      000227 57               [ 4]  645 	ld	d, a
      000228 1B               [ 8]  646 	dec	de
      000229 7B               [ 4]  647 	ld	a, e
      00022A 22               [ 8]  648 	ld	(hl+), a
      00022B 72               [ 8]  649 	ld	(hl), d
                           00022C   650 	C$SpriteManager.c$103$1_0$202	= .
                                    651 	.globl	C$SpriteManager.c$103$1_0$202
                                    652 ;C:/ZGB-2023.0/common/src/SpriteManager.c:103: sprite = sprite_manager_sprites[sprite_idx];
      00022C 01rBCr02         [12]  653 	ld	bc, #_sprite_manager_sprites+0
      00022F F8 07            [12]  654 	ldhl	sp,	#7
      000231 5E               [ 8]  655 	ld	e, (hl)
      000232 16 00            [ 8]  656 	ld	d, #0x00
      000234 6B               [ 4]  657 	ld	l, e
      000235 62               [ 4]  658 	ld	h, d
      000236 29               [ 8]  659 	add	hl, hl
      000237 09               [ 8]  660 	add	hl, bc
      000238 2A               [ 8]  661 	ld	a, (hl+)
      000239 4F               [ 4]  662 	ld	c, a
      00023A 46               [ 8]  663 	ld	b, (hl)
                           00023B   664 	C$SpriteManager.c$104$1_0$202	= .
                                    665 	.globl	C$SpriteManager.c$104$1_0$202
                                    666 ;C:/ZGB-2023.0/common/src/SpriteManager.c:104: sprite->type = sprite_type;
      00023B 21 13 00         [12]  667 	ld	hl, #0x0013
      00023E 09               [ 8]  668 	add	hl, bc
      00023F 33               [ 8]  669 	inc	sp
      000240 33               [ 8]  670 	inc	sp
      000241 5D               [ 4]  671 	ld	e, l
      000242 54               [ 4]  672 	ld	d, h
      000243 D5               [16]  673 	push	de
      000244 F8 0A            [12]  674 	ldhl	sp,	#10
      000246 7E               [ 8]  675 	ld	a, (hl)
      000247 12               [ 8]  676 	ld	(de), a
                           000248   677 	C$SpriteManager.c$105$1_0$202	= .
                                    678 	.globl	C$SpriteManager.c$105$1_0$202
                                    679 ;C:/ZGB-2023.0/common/src/SpriteManager.c:105: sprite->marked_for_removal = 0;
      000248 21 14 00         [12]  680 	ld	hl, #0x0014
      00024B 09               [ 8]  681 	add	hl, bc
      00024C 36 00            [12]  682 	ld	(hl), #0x00
                           00024E   683 	C$SpriteManager.c$106$1_0$202	= .
                                    684 	.globl	C$SpriteManager.c$106$1_0$202
                                    685 ;C:/ZGB-2023.0/common/src/SpriteManager.c:106: sprite->lim_x = 32u;
      00024E 21 15 00         [12]  686 	ld	hl, #0x0015
      000251 09               [ 8]  687 	add	hl, bc
      000252 3E 20            [ 8]  688 	ld	a, #0x20
      000254 22               [ 8]  689 	ld	(hl+), a
      000255 36 00            [12]  690 	ld	(hl), #0x00
                           000257   691 	C$SpriteManager.c$107$1_0$202	= .
                                    692 	.globl	C$SpriteManager.c$107$1_0$202
                                    693 ;C:/ZGB-2023.0/common/src/SpriteManager.c:107: sprite->lim_y = 32u;
      000257 21 17 00         [12]  694 	ld	hl, #0x0017
      00025A 09               [ 8]  695 	add	hl, bc
      00025B 3E 20            [ 8]  696 	ld	a, #0x20
      00025D 22               [ 8]  697 	ld	(hl+), a
      00025E 36 00            [12]  698 	ld	(hl), #0x00
                           000260   699 	C$SpriteManager.c$108$1_0$202	= .
                                    700 	.globl	C$SpriteManager.c$108$1_0$202
                                    701 ;C:/ZGB-2023.0/common/src/SpriteManager.c:108: sprite->mirror = NO_MIRROR;
      000260 21 10 00         [12]  702 	ld	hl, #0x0010
      000263 09               [ 8]  703 	add	hl, bc
      000264 36 00            [12]  704 	ld	(hl), #0x00
                           000266   705 	C$SpriteManager.c$110$1_0$202	= .
                                    706 	.globl	C$SpriteManager.c$110$1_0$202
                                    707 ;C:/ZGB-2023.0/common/src/SpriteManager.c:110: VectorAdd(sprite_manager_updatables, sprite_idx);
      000266 C5               [16]  708 	push	bc
      000267 F8 09            [12]  709 	ldhl	sp,	#9
      000269 7E               [ 8]  710 	ld	a, (hl)
      00026A 11r02r00         [12]  711 	ld	de, #_sprite_manager_updatables
      00026D CDr00r00         [24]  712 	call	_VectorAdd
      000270 C1               [12]  713 	pop	bc
                           000271   714 	C$SpriteManager.c$112$1_0$202	= .
                                    715 	.globl	C$SpriteManager.c$112$1_0$202
                                    716 ;C:/ZGB-2023.0/common/src/SpriteManager.c:112: InitSprite(sprite, sprite_type);
      000271 C5               [16]  717 	push	bc
      000272 F8 0C            [12]  718 	ldhl	sp,	#12
      000274 7E               [ 8]  719 	ld	a, (hl)
      000275 59               [ 4]  720 	ld	e, c
      000276 50               [ 4]  721 	ld	d, b
      000277 CDr00r00         [24]  722 	call	_InitSprite
      00027A C1               [12]  723 	pop	bc
                           00027B   724 	C$SpriteManager.c$113$1_0$202	= .
                                    725 	.globl	C$SpriteManager.c$113$1_0$202
                                    726 ;C:/ZGB-2023.0/common/src/SpriteManager.c:113: sprite->x = x;
      00027B 21 0C 00         [12]  727 	ld	hl, #0x000c
      00027E 09               [ 8]  728 	add	hl, bc
      00027F 5D               [ 4]  729 	ld	e, l
      000280 54               [ 4]  730 	ld	d, h
      000281 F8 08            [12]  731 	ldhl	sp,	#8
      000283 2A               [ 8]  732 	ld	a, (hl+)
      000284 12               [ 8]  733 	ld	(de), a
      000285 13               [ 8]  734 	inc	de
      000286 7E               [ 8]  735 	ld	a, (hl)
      000287 12               [ 8]  736 	ld	(de), a
                           000288   737 	C$SpriteManager.c$114$1_0$202	= .
                                    738 	.globl	C$SpriteManager.c$114$1_0$202
                                    739 ;C:/ZGB-2023.0/common/src/SpriteManager.c:114: sprite->y = y;
      000288 21 0E 00         [12]  740 	ld	hl, #0x000e
      00028B 09               [ 8]  741 	add	hl, bc
      00028C 5D               [ 4]  742 	ld	e, l
      00028D 54               [ 4]  743 	ld	d, h
      00028E F8 0D            [12]  744 	ldhl	sp,	#13
      000290 2A               [ 8]  745 	ld	a, (hl+)
      000291 12               [ 8]  746 	ld	(de), a
      000292 13               [ 8]  747 	inc	de
      000293 7E               [ 8]  748 	ld	a, (hl)
      000294 12               [ 8]  749 	ld	(de), a
                           000295   750 	C$SpriteManager.c$115$1_0$202	= .
                                    751 	.globl	C$SpriteManager.c$115$1_0$202
                                    752 ;C:/ZGB-2023.0/common/src/SpriteManager.c:115: sprite->unique_id = SPRITE_UNIQUE_ID(x >> 3, (y + sprite->coll_h - 1) >> 3);
      000295 21 19 00         [12]  753 	ld	hl, #0x0019
      000298 09               [ 8]  754 	add	hl, bc
      000299 E5               [16]  755 	push	hl
      00029A 7D               [ 4]  756 	ld	a, l
      00029B F8 04            [12]  757 	ldhl	sp,	#4
      00029D 77               [ 8]  758 	ld	(hl), a
      00029E E1               [12]  759 	pop	hl
      00029F 7C               [ 4]  760 	ld	a, h
      0002A0 F8 03            [12]  761 	ldhl	sp,	#3
      0002A2 77               [ 8]  762 	ld	(hl), a
      0002A3 F8 08            [12]  763 	ldhl	sp,#8
      0002A5 2A               [ 8]  764 	ld	a, (hl+)
      0002A6 5F               [ 4]  765 	ld	e, a
      0002A7 56               [ 8]  766 	ld	d, (hl)
      0002A8 CB 3A            [ 8]  767 	srl	d
      0002AA CB 1B            [ 8]  768 	rr	e
      0002AC CB 3A            [ 8]  769 	srl	d
      0002AE CB 1B            [ 8]  770 	rr	e
      0002B0 CB 3A            [ 8]  771 	srl	d
      0002B2 CB 1B            [ 8]  772 	rr	e
      0002B4 F8 04            [12]  773 	ldhl	sp,	#4
      0002B6 7B               [ 4]  774 	ld	a, e
      0002B7 22               [ 8]  775 	ld	(hl+), a
      0002B8 36 00            [12]  776 	ld	(hl), #0x00
      0002BA 21 12 00         [12]  777 	ld	hl, #0x0012
      0002BD 09               [ 8]  778 	add	hl, bc
      0002BE 5E               [ 8]  779 	ld	e, (hl)
      0002BF 16 00            [ 8]  780 	ld	d, #0x00
      0002C1 F8 0D            [12]  781 	ldhl	sp,	#13
      0002C3 2A               [ 8]  782 	ld	a,	(hl+)
      0002C4 66               [ 8]  783 	ld	h, (hl)
      0002C5 6F               [ 4]  784 	ld	l, a
      0002C6 19               [ 8]  785 	add	hl, de
      0002C7 5D               [ 4]  786 	ld	e, l
      0002C8 54               [ 4]  787 	ld	d, h
      0002C9 1B               [ 8]  788 	dec	de
      0002CA CB 3A            [ 8]  789 	srl	d
      0002CC CB 1B            [ 8]  790 	rr	e
      0002CE CB 3A            [ 8]  791 	srl	d
      0002D0 CB 1B            [ 8]  792 	rr	e
      0002D2 CB 3A            [ 8]  793 	srl	d
      0002D4 CB 1B            [ 8]  794 	rr	e
      0002D6 F8 04            [12]  795 	ldhl	sp,	#4
      0002D8 2A               [ 8]  796 	ld	a, (hl+)
      0002D9 23               [ 8]  797 	inc	hl
      0002DA 22               [ 8]  798 	ld	(hl+), a
      0002DB 73               [ 8]  799 	ld	(hl), e
      0002DC F8 02            [12]  800 	ldhl	sp,#2
      0002DE 2A               [ 8]  801 	ld	a, (hl+)
      0002DF 5F               [ 4]  802 	ld	e, a
      0002E0 56               [ 8]  803 	ld	d, (hl)
      0002E1 F8 06            [12]  804 	ldhl	sp,	#6
      0002E3 2A               [ 8]  805 	ld	a, (hl+)
      0002E4 12               [ 8]  806 	ld	(de), a
      0002E5 13               [ 8]  807 	inc	de
      0002E6 7E               [ 8]  808 	ld	a, (hl)
      0002E7 12               [ 8]  809 	ld	(de), a
                           0002E8   810 	C$SpriteManager.c$118$1_0$202	= .
                                    811 	.globl	C$SpriteManager.c$118$1_0$202
                                    812 ;C:/ZGB-2023.0/common/src/SpriteManager.c:118: cachedSprite = THIS;
      0002E8 FAr1Br00         [16]  813 	ld	a, (#_THIS)
      0002EB EArF9r02         [16]  814 	ld	(#_cachedSprite),a
      0002EE FAr1Cr00         [16]  815 	ld	a, (#_THIS + 1)
      0002F1 EArFAr02         [16]  816 	ld	(#_cachedSprite + 1),a
                           0002F4   817 	C$SpriteManager.c$119$1_0$202	= .
                                    818 	.globl	C$SpriteManager.c$119$1_0$202
                                    819 ;C:/ZGB-2023.0/common/src/SpriteManager.c:119: spriteIdxTmp = THIS_IDX;
      0002F4 FAr1Ar00         [16]  820 	ld	a, (#_THIS_IDX)
      0002F7 F8 07            [12]  821 	ldhl	sp,	#7
      0002F9 77               [ 8]  822 	ld	(hl), a
                           0002FA   823 	C$SpriteManager.c$120$1_0$202	= .
                                    824 	.globl	C$SpriteManager.c$120$1_0$202
                                    825 ;C:/ZGB-2023.0/common/src/SpriteManager.c:120: THIS = sprite;
      0002FA 21r1Br00         [12]  826 	ld	hl, #_THIS
      0002FD 79               [ 4]  827 	ld	a, c
      0002FE 22               [ 8]  828 	ld	(hl+), a
      0002FF 70               [ 8]  829 	ld	(hl), b
                           000300   830 	C$SpriteManager.c$121$1_0$202	= .
                                    831 	.globl	C$SpriteManager.c$121$1_0$202
                                    832 ;C:/ZGB-2023.0/common/src/SpriteManager.c:121: THIS_IDX = sprite_manager_updatables[0] - 1;
      000300 FAr02r00         [16]  833 	ld	a, (#_sprite_manager_updatables + 0)
      000303 3D               [ 4]  834 	dec	a
      000304 EAr1Ar00         [16]  835 	ld	(#_THIS_IDX),a
                           000307   836 	C$SpriteManager.c$122$1_0$202	= .
                                    837 	.globl	C$SpriteManager.c$122$1_0$202
                                    838 ;C:/ZGB-2023.0/common/src/SpriteManager.c:122: PUSH_BANK(spriteBanks[sprite->type]);
      000307 D1               [12]  839 	pop	de
      000308 D5               [16]  840 	push	de
      000309 1A               [ 8]  841 	ld	a, (de)
      00030A C6r00            [ 8]  842 	add	a, #<(_spriteBanks)
      00030C 5F               [ 4]  843 	ld	e, a
      00030D 3E 00            [ 8]  844 	ld	a, #0x00
      00030F CEs00            [ 8]  845 	adc	a, #>(_spriteBanks)
      000311 57               [ 4]  846 	ld	d, a
      000312 1A               [ 8]  847 	ld	a, (de)
      000313 C5               [16]  848 	push	bc
      000314 F5               [16]  849 	push	af
      000315 33               [ 8]  850 	inc	sp
      000316 CDr00r00         [24]  851 	call	_PushBank
      000319 33               [ 8]  852 	inc	sp
      00031A C1               [12]  853 	pop	bc
                           00031B   854 	C$SpriteManager.c$123$1_0$202	= .
                                    855 	.globl	C$SpriteManager.c$123$1_0$202
                                    856 ;C:/ZGB-2023.0/common/src/SpriteManager.c:123: spriteStartFuncs[sprite->type]();
      00031B D1               [12]  857 	pop	de
      00031C D5               [16]  858 	push	de
      00031D 1A               [ 8]  859 	ld	a, (de)
      00031E 26 00            [ 8]  860 	ld	h, #0x00
                                    861 ;	spillPairReg hl
                                    862 ;	spillPairReg hl
      000320 6F               [ 4]  863 	ld	l, a
      000321 29               [ 8]  864 	add	hl, hl
      000322 11r00r00         [12]  865 	ld	de, #_spriteStartFuncs
      000325 19               [ 8]  866 	add	hl, de
      000326 2A               [ 8]  867 	ld	a,	(hl+)
      000327 66               [ 8]  868 	ld	h, (hl)
                                    869 ;	spillPairReg hl
      000328 6F               [ 4]  870 	ld	l, a
                                    871 ;	spillPairReg hl
                                    872 ;	spillPairReg hl
      000329 C5               [16]  873 	push	bc
      00032A CDr00r00         [24]  874 	call	___sdcc_call_hl
      00032D CDr00r00         [24]  875 	call	_PopBank
      000330 C1               [12]  876 	pop	bc
                           000331   877 	C$SpriteManager.c$126$1_0$202	= .
                                    878 	.globl	C$SpriteManager.c$126$1_0$202
                                    879 ;C:/ZGB-2023.0/common/src/SpriteManager.c:126: THIS = cachedSprite;
      000331 FArF9r02         [16]  880 	ld	a, (#_cachedSprite)
      000334 EAr1Br00         [16]  881 	ld	(#_THIS),a
      000337 FArFAr02         [16]  882 	ld	a, (#_cachedSprite + 1)
      00033A EAr1Cr00         [16]  883 	ld	(#_THIS + 1),a
                           00033D   884 	C$SpriteManager.c$127$1_0$202	= .
                                    885 	.globl	C$SpriteManager.c$127$1_0$202
                                    886 ;C:/ZGB-2023.0/common/src/SpriteManager.c:127: THIS_IDX = spriteIdxTmp;
      00033D F8 07            [12]  887 	ldhl	sp,	#7
      00033F 7E               [ 8]  888 	ld	a, (hl)
      000340 EAr1Ar00         [16]  889 	ld	(#_THIS_IDX),a
                           000343   890 	C$SpriteManager.c$128$1_0$202	= .
                                    891 	.globl	C$SpriteManager.c$128$1_0$202
                                    892 ;C:/ZGB-2023.0/common/src/SpriteManager.c:128: return sprite;
                           000343   893 	C$SpriteManager.c$129$1_0$202	= .
                                    894 	.globl	C$SpriteManager.c$129$1_0$202
                                    895 ;C:/ZGB-2023.0/common/src/SpriteManager.c:129: }
      000343 E8 0B            [16]  896 	add	sp, #11
      000345 E1               [12]  897 	pop	hl
      000346 F1               [12]  898 	pop	af
      000347 E9               [ 4]  899 	jp	(hl)
                           000348   900 	G$SpriteManagerRemove$0$0	= .
                                    901 	.globl	G$SpriteManagerRemove$0$0
                           000348   902 	C$SpriteManager.c$131$1_0$204	= .
                                    903 	.globl	C$SpriteManager.c$131$1_0$204
                                    904 ;C:/ZGB-2023.0/common/src/SpriteManager.c:131: void SpriteManagerRemove(int idx) {
                                    905 ;	---------------------------------
                                    906 ; Function SpriteManagerRemove
                                    907 ; ---------------------------------
      000348                        908 _SpriteManagerRemove::
                           000348   909 	C$SpriteManager.c$132$1_0$204	= .
                                    910 	.globl	C$SpriteManager.c$132$1_0$204
                                    911 ;C:/ZGB-2023.0/common/src/SpriteManager.c:132: sprite_manager_removal_check = 1;
      000348 21rF8r02         [12]  912 	ld	hl, #_sprite_manager_removal_check
      00034B 36 01            [12]  913 	ld	(hl), #0x01
                           00034D   914 	C$SpriteManager.c$133$1_0$204	= .
                                    915 	.globl	C$SpriteManager.c$133$1_0$204
                                    916 ;C:/ZGB-2023.0/common/src/SpriteManager.c:133: sprite_manager_sprites[sprite_manager_updatables[idx + 1]]->marked_for_removal = 1;
      00034D 01rBCr02         [12]  917 	ld	bc, #_sprite_manager_sprites+0
      000350 1C               [ 4]  918 	inc	e
      000351 7B               [ 4]  919 	ld	a, e
      000352 07               [ 4]  920 	rlca
      000353 9F               [ 4]  921 	sbc	a, a
      000354 57               [ 4]  922 	ld	d, a
      000355 21r02r00         [12]  923 	ld	hl, #_sprite_manager_updatables
      000358 19               [ 8]  924 	add	hl, de
      000359 6E               [ 8]  925 	ld	l, (hl)
                                    926 ;	spillPairReg hl
      00035A 26 00            [ 8]  927 	ld	h, #0x00
                                    928 ;	spillPairReg hl
                                    929 ;	spillPairReg hl
      00035C 29               [ 8]  930 	add	hl, hl
      00035D 09               [ 8]  931 	add	hl, bc
      00035E 2A               [ 8]  932 	ld	a, (hl+)
      00035F 4F               [ 4]  933 	ld	c, a
      000360 46               [ 8]  934 	ld	b, (hl)
      000361 21 14 00         [12]  935 	ld	hl, #0x0014
      000364 09               [ 8]  936 	add	hl, bc
      000365 36 01            [12]  937 	ld	(hl), #0x01
                           000367   938 	C$SpriteManager.c$134$1_0$204	= .
                                    939 	.globl	C$SpriteManager.c$134$1_0$204
                                    940 ;C:/ZGB-2023.0/common/src/SpriteManager.c:134: }
                           000367   941 	C$SpriteManager.c$134$1_0$204	= .
                                    942 	.globl	C$SpriteManager.c$134$1_0$204
                           000367   943 	XG$SpriteManagerRemove$0$0	= .
                                    944 	.globl	XG$SpriteManagerRemove$0$0
      000367 C9               [16]  945 	ret
                           000368   946 	G$SpriteManagerRemoveSprite$0$0	= .
                                    947 	.globl	G$SpriteManagerRemoveSprite$0$0
                           000368   948 	C$SpriteManager.c$136$1_0$207	= .
                                    949 	.globl	C$SpriteManager.c$136$1_0$207
                                    950 ;C:/ZGB-2023.0/common/src/SpriteManager.c:136: void SpriteManagerRemoveSprite(Sprite* sprite) {
                                    951 ;	---------------------------------
                                    952 ; Function SpriteManagerRemoveSprite
                                    953 ; ---------------------------------
      000368                        954 _SpriteManagerRemoveSprite::
      000368 E8 FC            [16]  955 	add	sp, #-4
      00036A F8 02            [12]  956 	ldhl	sp,	#2
      00036C 7B               [ 4]  957 	ld	a, e
      00036D 22               [ 8]  958 	ld	(hl+), a
      00036E 72               [ 8]  959 	ld	(hl), d
                           00036F   960 	C$SpriteManager.c$139$2_0$207	= .
                                    961 	.globl	C$SpriteManager.c$139$2_0$207
                                    962 ;C:/ZGB-2023.0/common/src/SpriteManager.c:139: for(i = 0u; i != sprite_manager_updatables[0]; ++i) {
      00036F 01 00 00         [12]  963 	ld	bc, #0x0
      000372                        964 00105$:
      000372 21r02r00         [12]  965 	ld	hl, #_sprite_manager_updatables
      000375 6E               [ 8]  966 	ld	l, (hl)
                                    967 ;	spillPairReg hl
                           000376   968 	C$SpriteManager.c$140$3_0$208	= .
                                    969 	.globl	C$SpriteManager.c$140$3_0$208
                                    970 ;C:/ZGB-2023.0/common/src/SpriteManager.c:140: s = sprite_manager_sprites[sprite_manager_updatables[i + 1]];
      000376 78               [ 4]  971 	ld	a,b
      000377 BD               [ 4]  972 	cp	a,l
      000378 28 33            [12]  973 	jr	Z, 00107$
      00037A 3C               [ 4]  974 	inc	a
      00037B 5F               [ 4]  975 	ld	e, a
      00037C 07               [ 4]  976 	rlca
      00037D 9F               [ 4]  977 	sbc	a, a
      00037E 57               [ 4]  978 	ld	d, a
      00037F 21r02r00         [12]  979 	ld	hl, #_sprite_manager_updatables
      000382 19               [ 8]  980 	add	hl, de
      000383 6E               [ 8]  981 	ld	l, (hl)
                                    982 ;	spillPairReg hl
      000384 26 00            [ 8]  983 	ld	h, #0x00
                                    984 ;	spillPairReg hl
                                    985 ;	spillPairReg hl
      000386 29               [ 8]  986 	add	hl, hl
      000387 11rBCr02         [12]  987 	ld	de, #_sprite_manager_sprites
      00038A 19               [ 8]  988 	add	hl, de
      00038B 5D               [ 4]  989 	ld	e, l
      00038C 54               [ 4]  990 	ld	d, h
      00038D 1A               [ 8]  991 	ld	a, (de)
      00038E F8 00            [12]  992 	ldhl	sp,	#0
      000390 22               [ 8]  993 	ld	(hl+), a
      000391 13               [ 8]  994 	inc	de
      000392 1A               [ 8]  995 	ld	a, (de)
      000393 77               [ 8]  996 	ld	(hl), a
                           000394   997 	C$SpriteManager.c$141$3_0$208	= .
                                    998 	.globl	C$SpriteManager.c$141$3_0$208
                                    999 ;C:/ZGB-2023.0/common/src/SpriteManager.c:141: if(s == sprite) {
      000394 F8 02            [12] 1000 	ldhl	sp,	#2
      000396 3A               [ 8] 1001 	ld	a, (hl-)
      000397 2B               [ 8] 1002 	dec	hl
      000398 96               [ 8] 1003 	sub	a, (hl)
      000399 20 0E            [12] 1004 	jr	NZ, 00106$
      00039B F8 03            [12] 1005 	ldhl	sp,	#3
      00039D 3A               [ 8] 1006 	ld	a, (hl-)
      00039E 2B               [ 8] 1007 	dec	hl
                           00039F  1008 	C$SpriteManager.c$142$4_0$209	= .
                                   1009 	.globl	C$SpriteManager.c$142$4_0$209
                                   1010 ;C:/ZGB-2023.0/common/src/SpriteManager.c:142: SpriteManagerRemove(i);
      00039F 96               [ 8] 1011 	sub	a,(hl)
      0003A0 20 07            [12] 1012 	jr	NZ, 00106$
      0003A2 57               [ 4] 1013 	ld	d,a
      0003A3 59               [ 4] 1014 	ld	e, c
      0003A4 CDr48r03         [24] 1015 	call	_SpriteManagerRemove
                           0003A7  1016 	C$SpriteManager.c$143$4_0$209	= .
                                   1017 	.globl	C$SpriteManager.c$143$4_0$209
                                   1018 ;C:/ZGB-2023.0/common/src/SpriteManager.c:143: break;
      0003A7 18 04            [12] 1019 	jr	00107$
      0003A9                       1020 00106$:
                           0003A9  1021 	C$SpriteManager.c$139$2_0$207	= .
                                   1022 	.globl	C$SpriteManager.c$139$2_0$207
                                   1023 ;C:/ZGB-2023.0/common/src/SpriteManager.c:139: for(i = 0u; i != sprite_manager_updatables[0]; ++i) {
      0003A9 04               [ 4] 1024 	inc	b
      0003AA 48               [ 4] 1025 	ld	c, b
      0003AB 18 C5            [12] 1026 	jr	00105$
      0003AD                       1027 00107$:
                           0003AD  1028 	C$SpriteManager.c$146$2_0$207	= .
                                   1029 	.globl	C$SpriteManager.c$146$2_0$207
                                   1030 ;C:/ZGB-2023.0/common/src/SpriteManager.c:146: }
      0003AD E8 04            [16] 1031 	add	sp, #4
                           0003AF  1032 	C$SpriteManager.c$146$2_0$207	= .
                                   1033 	.globl	C$SpriteManager.c$146$2_0$207
                           0003AF  1034 	XG$SpriteManagerRemoveSprite$0$0	= .
                                   1035 	.globl	XG$SpriteManagerRemoveSprite$0$0
      0003AF C9               [16] 1036 	ret
                           0003B0  1037 	G$SpriteManagerFlushRemove$0$0	= .
                                   1038 	.globl	G$SpriteManagerFlushRemove$0$0
                           0003B0  1039 	C$SpriteManager.c$148$2_0$210	= .
                                   1040 	.globl	C$SpriteManager.c$148$2_0$210
                                   1041 ;C:/ZGB-2023.0/common/src/SpriteManager.c:148: void SpriteManagerFlushRemove() {
                                   1042 ;	---------------------------------
                                   1043 ; Function SpriteManagerFlushRemove
                                   1044 ; ---------------------------------
      0003B0                       1045 _SpriteManagerFlushRemove::
      0003B0 3B               [ 8] 1046 	dec	sp
      0003B1 3B               [ 8] 1047 	dec	sp
                           0003B2  1048 	C$SpriteManager.c$150$2_0$211	= .
                                   1049 	.globl	C$SpriteManager.c$150$2_0$211
                                   1050 ;C:/ZGB-2023.0/common/src/SpriteManager.c:150: for(THIS_IDX = sprite_manager_updatables[0] - 1u; (UINT8)(THIS_IDX + 1u) != 0u; THIS_IDX --) {
      0003B2 FAr02r00         [16] 1051 	ld	a, (#_sprite_manager_updatables + 0)
      0003B5 3D               [ 4] 1052 	dec	a
      0003B6 EAr1Ar00         [16] 1053 	ld	(#_THIS_IDX),a
      0003B9                       1054 00105$:
      0003B9 21r1Ar00         [12] 1055 	ld	hl, #_THIS_IDX
      0003BC 4E               [ 8] 1056 	ld	c, (hl)
      0003BD 0C               [ 4] 1057 	inc	c
      0003BE 79               [ 4] 1058 	ld	a, c
      0003BF CAr44r04         [16] 1059 	jp	Z, 00103$
                           0003C2  1060 	C$SpriteManager.c$151$3_0$212	= .
                                   1061 	.globl	C$SpriteManager.c$151$3_0$212
                                   1062 ;C:/ZGB-2023.0/common/src/SpriteManager.c:151: THIS = sprite_manager_sprites[sprite_manager_updatables[THIS_IDX + 1u]];
      0003C2 59               [ 4] 1063 	ld	e, c
      0003C3 16 00            [ 8] 1064 	ld	d, #0x00
      0003C5 21r02r00         [12] 1065 	ld	hl, #_sprite_manager_updatables
      0003C8 19               [ 8] 1066 	add	hl, de
      0003C9 33               [ 8] 1067 	inc	sp
      0003CA 33               [ 8] 1068 	inc	sp
      0003CB 5D               [ 4] 1069 	ld	e, l
      0003CC 54               [ 4] 1070 	ld	d, h
      0003CD D5               [16] 1071 	push	de
      0003CE 1A               [ 8] 1072 	ld	a, (de)
      0003CF 26 00            [ 8] 1073 	ld	h, #0x00
                                   1074 ;	spillPairReg hl
                                   1075 ;	spillPairReg hl
      0003D1 6F               [ 4] 1076 	ld	l, a
      0003D2 29               [ 8] 1077 	add	hl, hl
      0003D3 11rBCr02         [12] 1078 	ld	de, #_sprite_manager_sprites
      0003D6 19               [ 8] 1079 	add	hl, de
      0003D7 5D               [ 4] 1080 	ld	e, l
      0003D8 54               [ 4] 1081 	ld	d, h
      0003D9 1A               [ 8] 1082 	ld	a, (de)
      0003DA 21r1Br00         [12] 1083 	ld	hl, #_THIS
      0003DD 22               [ 8] 1084 	ld	(hl+), a
      0003DE 13               [ 8] 1085 	inc	de
      0003DF 1A               [ 8] 1086 	ld	a, (de)
      0003E0 77               [ 8] 1087 	ld	(hl), a
                           0003E1  1088 	C$SpriteManager.c$152$3_0$212	= .
                                   1089 	.globl	C$SpriteManager.c$152$3_0$212
                                   1090 ;C:/ZGB-2023.0/common/src/SpriteManager.c:152: if(THIS->marked_for_removal) {
      0003E1 21r1Br00         [12] 1091 	ld	hl, #_THIS
      0003E4 2A               [ 8] 1092 	ld	a, (hl+)
      0003E5 4F               [ 4] 1093 	ld	c, a
      0003E6 46               [ 8] 1094 	ld	b, (hl)
      0003E7 21 14 00         [12] 1095 	ld	hl, #0x0014
      0003EA 09               [ 8] 1096 	add	hl, bc
      0003EB 7E               [ 8] 1097 	ld	a, (hl)
      0003EC B7               [ 4] 1098 	or	a, a
      0003ED 28 4E            [12] 1099 	jr	Z, 00106$
                           0003EF  1100 	C$SpriteManager.c$153$4_0$213	= .
                                   1101 	.globl	C$SpriteManager.c$153$4_0$213
                                   1102 ;C:/ZGB-2023.0/common/src/SpriteManager.c:153: StackPush(sprite_manager_sprites_pool, sprite_manager_updatables[THIS_IDX + 1u]);
      0003EF 21r00r00         [12] 1103 	ld	hl, #_sprite_manager_sprites_pool
      0003F2 34               [12] 1104 	inc	(hl)
      0003F3 20 02            [12] 1105 	jr	NZ, 00130$
      0003F5 23               [ 8] 1106 	inc	hl
      0003F6 34               [12] 1107 	inc	(hl)
      0003F7                       1108 00130$:
      0003F7 21r00r00         [12] 1109 	ld	hl, #_sprite_manager_sprites_pool
      0003FA 2A               [ 8] 1110 	ld	a, (hl+)
      0003FB 4F               [ 4] 1111 	ld	c, a
      0003FC 46               [ 8] 1112 	ld	b, (hl)
      0003FD D1               [12] 1113 	pop	de
      0003FE D5               [16] 1114 	push	de
      0003FF 1A               [ 8] 1115 	ld	a, (de)
      000400 02               [ 8] 1116 	ld	(bc), a
                           000401  1117 	C$SpriteManager.c$154$4_0$213	= .
                                   1118 	.globl	C$SpriteManager.c$154$4_0$213
                                   1119 ;C:/ZGB-2023.0/common/src/SpriteManager.c:154: VectorRemovePos(sprite_manager_updatables, THIS_IDX);
      000401 FAr1Ar00         [16] 1120 	ld	a, (#_THIS_IDX)
      000404 11r02r00         [12] 1121 	ld	de, #_sprite_manager_updatables
      000407 CDr00r00         [24] 1122 	call	_VectorRemovePos
                           00040A  1123 	C$SpriteManager.c$156$4_0$213	= .
                                   1124 	.globl	C$SpriteManager.c$156$4_0$213
                                   1125 ;C:/ZGB-2023.0/common/src/SpriteManager.c:156: PUSH_BANK(spriteBanks[THIS->type]);
      00040A 21r1Br00         [12] 1126 	ld	hl, #_THIS
      00040D 2A               [ 8] 1127 	ld	a, (hl+)
      00040E 4F               [ 4] 1128 	ld	c, a
      00040F 46               [ 8] 1129 	ld	b, (hl)
      000410 21 13 00         [12] 1130 	ld	hl, #0x0013
      000413 09               [ 8] 1131 	add	hl, bc
      000414 4E               [ 8] 1132 	ld	c, (hl)
      000415 21r00r00         [12] 1133 	ld	hl, #_spriteBanks
      000418 06 00            [ 8] 1134 	ld	b, #0x00
      00041A 09               [ 8] 1135 	add	hl, bc
      00041B 7E               [ 8] 1136 	ld	a, (hl)
      00041C F5               [16] 1137 	push	af
      00041D 33               [ 8] 1138 	inc	sp
      00041E CDr00r00         [24] 1139 	call	_PushBank
      000421 33               [ 8] 1140 	inc	sp
                           000422  1141 	C$SpriteManager.c$157$4_0$213	= .
                                   1142 	.globl	C$SpriteManager.c$157$4_0$213
                                   1143 ;C:/ZGB-2023.0/common/src/SpriteManager.c:157: spriteDestroyFuncs[THIS->type]();
      000422 21r1Br00         [12] 1144 	ld	hl, #_THIS
      000425 2A               [ 8] 1145 	ld	a, (hl+)
      000426 4F               [ 4] 1146 	ld	c, a
      000427 46               [ 8] 1147 	ld	b, (hl)
      000428 21 13 00         [12] 1148 	ld	hl, #0x0013
      00042B 09               [ 8] 1149 	add	hl, bc
      00042C 6E               [ 8] 1150 	ld	l, (hl)
                                   1151 ;	spillPairReg hl
      00042D 26 00            [ 8] 1152 	ld	h, #0x00
                                   1153 ;	spillPairReg hl
                                   1154 ;	spillPairReg hl
      00042F 29               [ 8] 1155 	add	hl, hl
      000430 11r00r00         [12] 1156 	ld	de, #_spriteDestroyFuncs
      000433 19               [ 8] 1157 	add	hl, de
      000434 2A               [ 8] 1158 	ld	a,	(hl+)
      000435 66               [ 8] 1159 	ld	h, (hl)
                                   1160 ;	spillPairReg hl
      000436 6F               [ 4] 1161 	ld	l, a
                                   1162 ;	spillPairReg hl
                                   1163 ;	spillPairReg hl
      000437 CDr00r00         [24] 1164 	call	___sdcc_call_hl
                           00043A  1165 	C$SpriteManager.c$158$4_0$213	= .
                                   1166 	.globl	C$SpriteManager.c$158$4_0$213
                                   1167 ;C:/ZGB-2023.0/common/src/SpriteManager.c:158: POP_BANK;
      00043A CDr00r00         [24] 1168 	call	_PopBank
      00043D                       1169 00106$:
                           00043D  1170 	C$SpriteManager.c$150$2_0$211	= .
                                   1171 	.globl	C$SpriteManager.c$150$2_0$211
                                   1172 ;C:/ZGB-2023.0/common/src/SpriteManager.c:150: for(THIS_IDX = sprite_manager_updatables[0] - 1u; (UINT8)(THIS_IDX + 1u) != 0u; THIS_IDX --) {
      00043D 21r1Ar00         [12] 1173 	ld	hl, #_THIS_IDX
      000440 35               [12] 1174 	dec	(hl)
      000441 C3rB9r03         [16] 1175 	jp	00105$
      000444                       1176 00103$:
                           000444  1177 	C$SpriteManager.c$161$1_0$210	= .
                                   1178 	.globl	C$SpriteManager.c$161$1_0$210
                                   1179 ;C:/ZGB-2023.0/common/src/SpriteManager.c:161: sprite_manager_removal_check = 0;
      000444 21rF8r02         [12] 1180 	ld	hl, #_sprite_manager_removal_check
      000447 36 00            [12] 1181 	ld	(hl), #0x00
                           000449  1182 	C$SpriteManager.c$162$1_0$210	= .
                                   1183 	.globl	C$SpriteManager.c$162$1_0$210
                                   1184 ;C:/ZGB-2023.0/common/src/SpriteManager.c:162: }
      000449 33               [ 8] 1185 	inc	sp
      00044A 33               [ 8] 1186 	inc	sp
                           00044B  1187 	C$SpriteManager.c$162$1_0$210	= .
                                   1188 	.globl	C$SpriteManager.c$162$1_0$210
                           00044B  1189 	XG$SpriteManagerFlushRemove$0$0	= .
                                   1190 	.globl	XG$SpriteManagerFlushRemove$0$0
      00044B C9               [16] 1191 	ret
                           00044C  1192 	G$SetBank$0$0	= .
                                   1193 	.globl	G$SetBank$0$0
                           00044C  1194 	C$SpriteManager.c$164$1_0$215	= .
                                   1195 	.globl	C$SpriteManager.c$164$1_0$215
                                   1196 ;C:/ZGB-2023.0/common/src/SpriteManager.c:164: void SetBank(UINT8 bank) OLDCALL
                                   1197 ;	---------------------------------
                                   1198 ; Function SetBank
                                   1199 ; ---------------------------------
      00044C                       1200 _SetBank::
                           00044C  1201 	C$SpriteManager.c$174$1_0$215	= .
                                   1202 	.globl	C$SpriteManager.c$174$1_0$215
                                   1203 ;C:/ZGB-2023.0/common/src/SpriteManager.c:174: __endasm;
      00044C F8 02            [12] 1204 	ldhl	sp, #2
      00044E 7E               [ 8] 1205 	ld	a, (hl)
      00044F EAr00r00         [16] 1206 	ld	(#__current_bank), a
      000452 EA 00 20         [16] 1207 	ld	(#0x2000), a
                           000455  1208 	C$SpriteManager.c$175$1_0$215	= .
                                   1209 	.globl	C$SpriteManager.c$175$1_0$215
                                   1210 ;C:/ZGB-2023.0/common/src/SpriteManager.c:175: }
                           000455  1211 	C$SpriteManager.c$175$1_0$215	= .
                                   1212 	.globl	C$SpriteManager.c$175$1_0$215
                           000455  1213 	XG$SetBank$0$0	= .
                                   1214 	.globl	XG$SetBank$0$0
      000455 C9               [16] 1215 	ret
                           000456  1216 	G$SpriteManagerUpdate$0$0	= .
                                   1217 	.globl	G$SpriteManagerUpdate$0$0
                           000456  1218 	C$SpriteManager.c$182$1_0$216	= .
                                   1219 	.globl	C$SpriteManager.c$182$1_0$216
                                   1220 ;C:/ZGB-2023.0/common/src/SpriteManager.c:182: void SpriteManagerUpdate() {
                                   1221 ;	---------------------------------
                                   1222 ; Function SpriteManagerUpdate
                                   1223 ; ---------------------------------
      000456                       1224 _SpriteManagerUpdate::
      000456 3B               [ 8] 1225 	dec	sp
      000457 3B               [ 8] 1226 	dec	sp
                           000458  1227 	C$SpriteManager.c$183$2_0$217	= .
                                   1228 	.globl	C$SpriteManager.c$183$2_0$217
                                   1229 ;C:/ZGB-2023.0/common/src/SpriteManager.c:183: SPRITEMANAGER_ITERATE(THIS_IDX, THIS) {
      000458 21r1Ar00         [12] 1230 	ld	hl, #_THIS_IDX
      00045B 36 00            [12] 1231 	ld	(hl), #0x00
      00045D FAr03r00         [16] 1232 	ld	a, (#(_sprite_manager_updatables + 1) + 0)
      000460 6F               [ 4] 1233 	ld	l, a
                                   1234 ;	spillPairReg hl
                                   1235 ;	spillPairReg hl
      000461 26 00            [ 8] 1236 	ld	h, #0x00
                                   1237 ;	spillPairReg hl
                                   1238 ;	spillPairReg hl
      000463 29               [ 8] 1239 	add	hl, hl
      000464 11rBCr02         [12] 1240 	ld	de, #_sprite_manager_sprites
      000467 19               [ 8] 1241 	add	hl, de
      000468 5D               [ 4] 1242 	ld	e, l
      000469 54               [ 4] 1243 	ld	d, h
      00046A 1A               [ 8] 1244 	ld	a, (de)
      00046B 21r1Br00         [12] 1245 	ld	hl, #_THIS
      00046E 22               [ 8] 1246 	ld	(hl+), a
      00046F 13               [ 8] 1247 	inc	de
      000470 1A               [ 8] 1248 	ld	a, (de)
      000471 77               [ 8] 1249 	ld	(hl), a
      000472                       1250 00109$:
      000472 21r02r00         [12] 1251 	ld	hl, #_sprite_manager_updatables
      000475 4E               [ 8] 1252 	ld	c, (hl)
      000476 FAr1Ar00         [16] 1253 	ld	a, (#_THIS_IDX)
      000479 91               [ 4] 1254 	sub	a, c
      00047A CArFEr04         [16] 1255 	jp	Z,00105$
                           00047D  1256 	C$SpriteManager.c$184$1_0$216	= .
                                   1257 	.globl	C$SpriteManager.c$184$1_0$216
                                   1258 ;C:/ZGB-2023.0/common/src/SpriteManager.c:184: if(!THIS->marked_for_removal) {
      00047D FAr1Br00         [16] 1259 	ld	a, (#_THIS)
      000480 F8 00            [12] 1260 	ldhl	sp,	#0
      000482 77               [ 8] 1261 	ld	(hl), a
      000483 FAr1Cr00         [16] 1262 	ld	a, (#_THIS + 1)
      000486 F8 01            [12] 1263 	ldhl	sp,	#1
      000488 77               [ 8] 1264 	ld	(hl), a
      000489 D1               [12] 1265 	pop	de
      00048A D5               [16] 1266 	push	de
      00048B 21 14 00         [12] 1267 	ld	hl, #0x0014
      00048E 19               [ 8] 1268 	add	hl, de
      00048F 4D               [ 4] 1269 	ld	c, l
      000490 44               [ 4] 1270 	ld	b, h
      000491 0A               [ 8] 1271 	ld	a, (bc)
      000492 B7               [ 4] 1272 	or	a, a
      000493 20 48            [12] 1273 	jr	NZ, 00110$
                           000495  1274 	C$SpriteManager.c$186$4_0$219	= .
                                   1275 	.globl	C$SpriteManager.c$186$4_0$219
                                   1276 ;C:/ZGB-2023.0/common/src/SpriteManager.c:186: SetBank(spriteBanks[THIS->type]);
      000495 D1               [12] 1277 	pop	de
      000496 D5               [16] 1278 	push	de
      000497 21 13 00         [12] 1279 	ld	hl, #0x0013
      00049A 19               [ 8] 1280 	add	hl, de
      00049B 4D               [ 4] 1281 	ld	c, l
      00049C 44               [ 4] 1282 	ld	b, h
      00049D 0A               [ 8] 1283 	ld	a, (bc)
      00049E 4F               [ 4] 1284 	ld	c, a
      00049F 21r00r00         [12] 1285 	ld	hl, #_spriteBanks
      0004A2 06 00            [ 8] 1286 	ld	b, #0x00
      0004A4 09               [ 8] 1287 	add	hl, bc
      0004A5 7E               [ 8] 1288 	ld	a, (hl)
      0004A6 F5               [16] 1289 	push	af
      0004A7 33               [ 8] 1290 	inc	sp
      0004A8 CDr4Cr04         [24] 1291 	call	_SetBank
      0004AB 33               [ 8] 1292 	inc	sp
                           0004AC  1293 	C$SpriteManager.c$188$4_0$219	= .
                                   1294 	.globl	C$SpriteManager.c$188$4_0$219
                                   1295 ;C:/ZGB-2023.0/common/src/SpriteManager.c:188: spriteUpdateFuncs[THIS->type]();
      0004AC 21r1Br00         [12] 1296 	ld	hl, #_THIS
      0004AF 2A               [ 8] 1297 	ld	a, (hl+)
      0004B0 4F               [ 4] 1298 	ld	c, a
      0004B1 46               [ 8] 1299 	ld	b, (hl)
      0004B2 21 13 00         [12] 1300 	ld	hl, #0x0013
      0004B5 09               [ 8] 1301 	add	hl, bc
      0004B6 6E               [ 8] 1302 	ld	l, (hl)
                                   1303 ;	spillPairReg hl
      0004B7 26 00            [ 8] 1304 	ld	h, #0x00
                                   1305 ;	spillPairReg hl
                                   1306 ;	spillPairReg hl
      0004B9 29               [ 8] 1307 	add	hl, hl
      0004BA 11r00r00         [12] 1308 	ld	de, #_spriteUpdateFuncs
      0004BD 19               [ 8] 1309 	add	hl, de
      0004BE 2A               [ 8] 1310 	ld	a, (hl+)
      0004BF 4F               [ 4] 1311 	ld	c, a
      0004C0 66               [ 8] 1312 	ld	h, (hl)
                                   1313 ;	spillPairReg hl
      0004C1 69               [ 4] 1314 	ld	l, c
                                   1315 ;	spillPairReg hl
                                   1316 ;	spillPairReg hl
      0004C2 CDr00r00         [24] 1317 	call	___sdcc_call_hl
                           0004C5  1318 	C$SpriteManager.c$190$4_0$219	= .
                                   1319 	.globl	C$SpriteManager.c$190$4_0$219
                                   1320 ;C:/ZGB-2023.0/common/src/SpriteManager.c:190: if(THIS == scroll_target)
      0004C5 FAr1Br00         [16] 1321 	ld	a, (#_THIS)
      0004C8 21r00r00         [12] 1322 	ld	hl, #_scroll_target
      0004CB 96               [ 8] 1323 	sub	a, (hl)
      0004CC 20 0C            [12] 1324 	jr	NZ, 00102$
      0004CE FAr1Cr00         [16] 1325 	ld	a, (#_THIS + 1)
      0004D1 21r01r00         [12] 1326 	ld	hl, #_scroll_target + 1
      0004D4 96               [ 8] 1327 	sub	a, (hl)
      0004D5 20 03            [12] 1328 	jr	NZ, 00102$
                           0004D7  1329 	C$SpriteManager.c$191$4_0$219	= .
                                   1330 	.globl	C$SpriteManager.c$191$4_0$219
                                   1331 ;C:/ZGB-2023.0/common/src/SpriteManager.c:191: RefreshScroll();
      0004D7 CDr00r00         [24] 1332 	call	_RefreshScroll
      0004DA                       1333 00102$:
                           0004DA  1334 	C$SpriteManager.c$193$4_0$219	= .
                                   1335 	.globl	C$SpriteManager.c$193$4_0$219
                                   1336 ;C:/ZGB-2023.0/common/src/SpriteManager.c:193: DrawSprite(); //this needs to be done using the sprite bank because the animation array is stored there
      0004DA CDr00r00         [24] 1337 	call	_DrawSprite
      0004DD                       1338 00110$:
                           0004DD  1339 	C$SpriteManager.c$183$2_0$217	= .
                                   1340 	.globl	C$SpriteManager.c$183$2_0$217
                                   1341 ;C:/ZGB-2023.0/common/src/SpriteManager.c:183: SPRITEMANAGER_ITERATE(THIS_IDX, THIS) {
      0004DD 21r1Ar00         [12] 1342 	ld	hl, #_THIS_IDX
      0004E0 34               [12] 1343 	inc	(hl)
      0004E1 4E               [ 8] 1344 	ld	c, (hl)
      0004E2 0C               [ 4] 1345 	inc	c
      0004E3 21r02r00         [12] 1346 	ld	hl, #_sprite_manager_updatables
      0004E6 06 00            [ 8] 1347 	ld	b, #0x00
      0004E8 09               [ 8] 1348 	add	hl, bc
      0004E9 6E               [ 8] 1349 	ld	l, (hl)
                                   1350 ;	spillPairReg hl
      0004EA 26 00            [ 8] 1351 	ld	h, #0x00
                                   1352 ;	spillPairReg hl
                                   1353 ;	spillPairReg hl
      0004EC 29               [ 8] 1354 	add	hl, hl
      0004ED 11rBCr02         [12] 1355 	ld	de, #_sprite_manager_sprites
      0004F0 19               [ 8] 1356 	add	hl, de
      0004F1 5D               [ 4] 1357 	ld	e, l
      0004F2 54               [ 4] 1358 	ld	d, h
      0004F3 1A               [ 8] 1359 	ld	a, (de)
      0004F4 21r1Br00         [12] 1360 	ld	hl, #_THIS
      0004F7 22               [ 8] 1361 	ld	(hl+), a
      0004F8 13               [ 8] 1362 	inc	de
      0004F9 1A               [ 8] 1363 	ld	a, (de)
      0004FA 77               [ 8] 1364 	ld	(hl), a
      0004FB C3r72r04         [16] 1365 	jp	00109$
      0004FE                       1366 00105$:
                           0004FE  1367 	C$SpriteManager.c$197$1_0$216	= .
                                   1368 	.globl	C$SpriteManager.c$197$1_0$216
                                   1369 ;C:/ZGB-2023.0/common/src/SpriteManager.c:197: SwapOAMs();
      0004FE CDr00r00         [24] 1370 	call	_SwapOAMs
                           000501  1371 	C$SpriteManager.c$199$1_0$216	= .
                                   1372 	.globl	C$SpriteManager.c$199$1_0$216
                                   1373 ;C:/ZGB-2023.0/common/src/SpriteManager.c:199: if(sprite_manager_removal_check) {
      000501 21rF8r02         [12] 1374 	ld	hl, #_sprite_manager_removal_check
      000504 7E               [ 8] 1375 	ld	a, (hl)
      000505 B7               [ 4] 1376 	or	a, a
      000506 28 05            [12] 1377 	jr	Z, 00111$
                           000508  1378 	C$SpriteManager.c$200$2_0$220	= .
                                   1379 	.globl	C$SpriteManager.c$200$2_0$220
                                   1380 ;C:/ZGB-2023.0/common/src/SpriteManager.c:200: SpriteManagerFlushRemove();
      000508 33               [ 8] 1381 	inc	sp
      000509 33               [ 8] 1382 	inc	sp
      00050A C3rB0r03         [16] 1383 	jp	_SpriteManagerFlushRemove
      00050D                       1384 00111$:
                           00050D  1385 	C$SpriteManager.c$202$1_0$216	= .
                                   1386 	.globl	C$SpriteManager.c$202$1_0$216
                                   1387 ;C:/ZGB-2023.0/common/src/SpriteManager.c:202: }
      00050D 33               [ 8] 1388 	inc	sp
      00050E 33               [ 8] 1389 	inc	sp
                           00050F  1390 	C$SpriteManager.c$202$1_0$216	= .
                                   1391 	.globl	C$SpriteManager.c$202$1_0$216
                           00050F  1392 	XG$SpriteManagerUpdate$0$0	= .
                                   1393 	.globl	XG$SpriteManagerUpdate$0$0
      00050F C9               [16] 1394 	ret
                                   1395 	.area _CODE
                                   1396 	.area _INITIALIZER
                           000000  1397 FSpriteManager$__xinit_sprite_manager_sprites_pool$0_0$0 == .
      000000                       1398 __xinit__sprite_manager_sprites_pool:
      000000rE3r02                 1399 	.dw (_sprite_manager_sprites_poolSTACK - 1)
                           000002  1400 FSpriteManager$__xinit_sprite_manager_updatables$0_0$0 == .
      000002                       1401 __xinit__sprite_manager_updatables:
      000002 00                    1402 	.db #0x00	; 0
      000003 00                    1403 	.db 0x00
      000004 00                    1404 	.db 0x00
      000005 00                    1405 	.db 0x00
      000006 00                    1406 	.db 0x00
      000007 00                    1407 	.db 0x00
      000008 00                    1408 	.db 0x00
      000009 00                    1409 	.db 0x00
      00000A 00                    1410 	.db 0x00
      00000B 00                    1411 	.db 0x00
      00000C 00                    1412 	.db 0x00
      00000D 00                    1413 	.db 0x00
      00000E 00                    1414 	.db 0x00
      00000F 00                    1415 	.db 0x00
      000010 00                    1416 	.db 0x00
      000011 00                    1417 	.db 0x00
      000012 00                    1418 	.db 0x00
      000013 00                    1419 	.db 0x00
      000014 00                    1420 	.db 0x00
      000015 00                    1421 	.db 0x00
      000016 00                    1422 	.db 0x00
                           000017  1423 FSpriteManager$__xinit_last_sprite_loaded$0_0$0 == .
      000017                       1424 __xinit__last_sprite_loaded:
      000017 00 00                 1425 	.dw #0x0000
                           000019  1426 FSpriteManager$__xinit_last_sprite_pal_loaded$0_0$0 == .
      000019                       1427 __xinit__last_sprite_pal_loaded:
      000019 00                    1428 	.db #0x00	; 0
                           00001A  1429 FSpriteManager$__xinit_THIS_IDX$0_0$0 == .
      00001A                       1430 __xinit__THIS_IDX:
      00001A 00                    1431 	.db #0x00	; 0
                           00001B  1432 FSpriteManager$__xinit_THIS$0_0$0 == .
      00001B                       1433 __xinit__THIS:
      00001B 00 00                 1434 	.dw #0x0000
                                   1435 	.area _CABS (ABS)
